@model DWB.Models.TblNsassessment

<div class="card-body">
    <div class="card p-4 shadow-sm border-top border-primary border-3 mb-4">
    <h5 class="mb-3 border-bottom pb-2 text-secondary">👤 Patient Details</h5>
    <div class="row g-3">
        <div class="col-md-2">
            <label class="form-label fw-bold">UHID No</label>
            <p class="form-control-plaintext">@Model.VchUhidNo</p>
        </div>
        <div class="col-md-2">
            <label class="form-label fw-bold">Visit No</label>
            <p class="form-control-plaintext">@Model.IntIhmsvisit</p>
        </div>
        <div class="col-md-3">
            <label class="form-label fw-bold">Name</label>
            <p class="form-control-plaintext">@Model.VchHmsname</p>
        </div>
        <div class="col-md-1">
            <label class="form-label fw-bold">Age</label>
            <p class="form-control-plaintext">@Model.VchHmsage</p>
        </div>
        <div class="col-md-2">
            <label class="form-label fw-bold">Entry Date</label>
            <p class="form-control-plaintext">@Model.VchHmsdtEntry</p>
        </div>
        <div class="col-md-2">
            <label class="form-label fw-bold">In Time</label>
            <p class="form-control-plaintext">@Model.VchIhmintime</p>
        </div>
        <div class="col-md-6">
            <label class="form-label fw-bold">Consultant</label>
            <p class="form-control-plaintext">@Model.VchHmsconsultant</p>
        </div>
        <div class="col-md-6">
            <label class="form-label fw-bold">Category</label>
            <p class="form-control-plaintext">@Model.VchHmscategory</p>
        </div>
    </div>
    </div>

    <hr />
    <div class="card p-4 shadow-sm border-start border-primary border-3 mb-4">
        <h5 class="mb-3 text-primary">💓 Vital Signs</h5>
        <div class="row g-3">
            <div class="col-md-3"><label class="form-label">BP(/Mmhg)</label><p class="form-control-plaintext">@Model.VchBloodPressure</p></div>
            <div class="col-md-3"><label class="form-label">Pulse(/Min)</label><p class="form-control-plaintext">@Model.VchPulse</p></div>
            <div class="col-md-3"><label class="form-label">Temperature(°F)</label><p class="form-control-plaintext">@Model.DecTemperature</p></div>
            <div class="col-md-3"><label class="form-label">SpO2(%age)</label><p class="form-control-plaintext">@Model.DecSpO2</p></div>
            <div class="col-md-3"><label class="form-label">Weight(Kg)</label><p class="form-control-plaintext">@Model.DecWeight</p></div>
            <div class="col-md-3"><label class="form-label">Height(CM)</label><p class="form-control-plaintext">@Model.DecHeight</p></div>
            <div class="col-md-3"><label class="form-label">Respiratory Rate(/Min)</label><p class="form-control-plaintext">@Model.DecRespiratoryRate</p></div>
            <div class="col-md-3"><label class="form-label">O₂ Flow Rate</label><p class="form-control-plaintext">@Model.DecOxygenFlowRate</p></div>
        </div>
    </div>

    <hr />
    <div class="card p-4 shadow-sm border-start border-success border-3 mb-4">
        <h5 class="mb-3 text-success">🧬 Personal History</h5>
        <div class="row g-3 align-items-center">
            <div class="col-md-3">
                <label class="form-label fw-bold">Allergies</label>
                <p class="form-control-plaintext">@((Model.BitIsAllergical == true) ? "Yes" : "No")</p>
            </div>
            @if (Model.BitIsAllergical == true)
            {
                <div class="col-md-9">
                    <label class="form-label fw-bold">List drugs/foods</label>
                    <p class="form-control-plaintext">@Model.VchAllergicalDrugs</p>
                </div>
            }
            <div class="col-md-3">
                <label class="form-label fw-bold">Alcohol</label>
                <p class="form-control-plaintext">@((Model.BitIsAlcoholic == true) ? "Yes" : "No")</p>
            </div>
            <div class="col-md-3">
                <label class="form-label fw-bold">Smoking</label>
                <p class="form-control-plaintext">@((Model.BitIsSmoking == true) ? "Yes" : "No")</p>
            </div>
            <div class="col-md-6">
                <label class="form-label fw-bold">LMP(Females)</label>
                <p class="form-control-plaintext">@Model.VchLmpForFemale</p>
            </div>
        </div>
    </div>

    <hr />
    <div class="card p-4 shadow-sm border-start border-danger border-3 mb-4">
    <h5 class="mb-3 text-danger">🩺 Past History</h5>
    <div class="row g-3">
        @{
            void DisplayHistory(string label, bool? value)
            {
                <div class="col-md-3">
                    <label class="form-label fw-bold">@label</label>
                    <p class="form-control-plaintext">@((value == true) ? "Yes" : "No")</p>
                </div>
                ;
            }
            DisplayHistory("Diabetes", Model.BitDiabetes);
            DisplayHistory("Heart Disease", Model.BitHeartDisease);
            DisplayHistory("Hypertension", Model.BitHypertension);
            DisplayHistory("Asthma", Model.BitAsthma);
            DisplayHistory("High Cholesterol", Model.BitCholesterol);
            DisplayHistory("Tuberculosis", Model.BitTuberculosis);
            DisplayHistory("Surgery", Model.BitSurgery);
            DisplayHistory("Hospitalized (last 3 mo)", Model.BitHospitalization);
        }
        <div class="col-md-12">
            <label class="form-label fw-bold">Other History</label>
            <p class="form-control-plaintext">@Model.VchOtherHistory</p>
        </div>
    </div>
    </div>
       
          @*   @{
                var documents = ViewBag.Documents as List<DWB.Models.TblNassessmentDoc>;
            } *@
            @if (Model.TblNassessmentDoc != null && Model.TblNassessmentDoc.Any())
            {
            <div class="card p-4 shadow-sm border-start border-info border-3 mb-4">
                <h5 class="mb-3 text-info">📂 Supporting Documents</h5>
                <ul class="list-group list-group-flush">
                    @foreach (var document in Model.TblNassessmentDoc)
                    {
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span>@document.VchFileName</span>
                            @* path H:\DWB-Working\DWB\wwwroot\Uploads\NAssessment *@
                        <a href="@Url.Content("~/uploads/NAssessment/" + document.VchFileName)"
                               class="btn btn-sm btn-outline-info"
                               target="_blank"
                               title="View Document">
                                <i class="fas fa-eye me-1"></i>View
                            </a>
                            @*<a href="~/Content/Uploads/@document.VchFileName" class="btn btn-sm btn-outline-primary" target="_blank" download>
                                <i class="fas fa-download me-1"></i> http://localhost:5222/View
                            </a>*@
                        </li>
                    }
                </ul>
            </div>   
            }
            else
            {
            <div class="card p-4 shadow-sm border-start border-info border-3 mb-4">
                <h5 class="mb-3 text-info">📂 Supporting Documents</h5>
                <ul class="list-group list-group-flush">
                    <p class="text-info fst-italic">No supporting documents were uploaded for this assessment.</p>
                </ul>
            </div>
            }
    


    <div class="text-end mt-4">
        <a asp-action="Nursingassessment" asp-controller="Assessment" class="btn btn-secondary">Close</a>
    </div>
</div>